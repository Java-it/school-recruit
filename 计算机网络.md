#### 广播发送ARP请求，单播发送ARP响应。
## 一、电路交换、报文交换、分组交换的比较

### 1、电路交换

公共电话网(PSTN网)和移动网(包括GSM和CDMA网)采用的都是电路交换技术，它的基本特点是采用面向连接的方式，在双方进行通信之前，需要为通信双方分配一条具有固定宽带的通信电路，通信双方在通信过程中一直占用所分配的资源，直到通信结束，并且在电路的建立和释放过程中都需要利用相关的信令协议。这种方式的优点是在通信过程中可以保证为用户提供足够的带宽，并且实时性强，时延小，交换设备成本低，但同时带来的缺点是信道利用率低，一旦电路被建立不管通信双方是否处于通话状态分配的电路一直被占用。

### 2、报文交换
报文交换是以报文为数据交换的单位，报文携带有目标地址、源地址等信息，在交换结点采用存储转发的传输方式；由于报文长度差异很大，长报文可能导致很大的时延；
为了满足各种长度报文的需要并且达到高效的目的，节点需要分配不同大小的缓冲区，否则就有可能造成数据传送的失败，这样对每个节点来说缓冲区的分配也比较困难。另外一个缺点是出错时，整个报文都将重传。
### 3、分组交换  
分组交换仍采用存储转发传输方式，但将一个长报文先分割为若干个较短的分组，然后把这些分组（携带源、目的地址和编号信息）逐个地发送出去。采用分组交换技术，在通信之前不需要建立连接，每个节点首先将前一节点送来的分组收下并保存在缓冲区中，然后根据分组头部中的地址信息选择适当的链路将其发送至下一个节点，这样在通信过程中可以根据用户的要求和网络的能力来动态分配带宽。分组交换比电路交换的信道利用率高，但时延较大。分组转发的带来的问题：排队时延以及增加头部带来的开销。   
总之，若要传送的数据量很大，且其传送时间远大于呼叫时间，则采用电路交换较为合适；当端到端的通路有很多段的链路组成时，采用分组交换传送数据较为合适。从提高整个网络的信道利用率上看，报文交换和分组交换优于电路交换，其中分组交换比报文交换的时延小，尤其适合于计算机之间的突发式的数据通信。


## 二、接口、协议和服务
接口：下层向上层提供的原语操作   
协议：同一层之间，通信双方进行信息交换必须遵守的规则   
服务：不同层之间交换信息必须遵守的规则  
## 三、网络各层的作用
* 物理层：通过传输介质发送和接收二进制比特流。
    属于物理层定义的典型规范如RJ-45等。   
* 数据链路层：数据的封装成帧、数据的透明传输、数据的差错检测。
  数据链路层协议的代表包括：PPP、帧中继等。   
* 网络层：负责对子网间的数据包进行路由选择，为分组交换网上的不同主机提供通信服务。
    网络层协议的代表包括：IP、ICMP、IGMP等。   
* 运输层：负责向两个主机中进程之间的通信提供服务。运输层还要处理端到端的差错检测(与数据链路层不同)、拥塞控制、流量控制等问题。
    运输层协议的代表包括：TCP、UDP等。    
* 应用层：为操作系统或网络应用程序提供访问网络服务的接口。   
  应用层协议的代表包括：FTP、HTTP、SNMP等。

## 每一层的作用如下：

* 物理层：通过媒介传输比特,确定机械及电气规范（比特Bit）

* 数据链路层：将比特组装成帧和点到点的传递（帧Frame）

* 网络层：负责数据包从源到宿的传递和网际互连（包PackeT）

* 传输层：提供端到端的可靠报文传递和错误恢复（段Segment）

* 会话层：建立、管理和终止会话（会话协议数据单元SPDU）

* 表示层：对数据进行翻译、加密和压缩（表示协议数据单元PPDU）

* 应用层：允许访问OSI环境的手段（应用协议数据单元APDU）
## IP地址的分类  

* A类地址：以0开头， 第一个字节范围：0~127（1.0.0.0 - 126.255.255.255）；

* B类地址：以10开头，    第一个字节范围：128~191（128.0.0.0 - 191.255.255.255）；

* C类地址：以110开头，  第一个字节范围：192~223（192.0.0.0 - 223.255.255.255）；

* D类地址：以1110开头，第一个字节范围：224~239（224.0.0.0---239.255.255.255）；

  【D类地址是特殊用途，用于组播，多目的地址发送，不区分网络地址和主机地址。】

* E类地址：以1111开头，第一个字节范围：240~255（240.0.0.0---255.255.255.255）；

  【E类地址是特殊用途，用于实验，做保留了，不区分网络地址和主机地址。】

  10.0.0.0—10.255.255.255， 172.16.0.0—172.31.255.255， 192.168.0.0—192.168.255.255。（Internet上保留地址用于内部）
  
## 各种协议  

* ICMP协议：    因特网控制报文协议。它是TCP/IP协议族的一个子协议，用于在IP主机、路由器之间传递控制消息。      

* TFTP协议：    是TCP/IP协议族中的一个用来在客户机与服务器之间进行简单文件传输的协议，提供不复杂、开销不大的文件传输服务。  

* HTTP协议：    超文本传输协议，是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。

* DHCP协议：    动态主机配置协议，是一种让系统得以连接到网络上，并获取所需要的配置参数手段。

* NAT协议：    网络地址转换属接入广域网(WAN)技术，是一种将私有（保留）地址转化为合法IP地址的转换技术，

* DHCP协议：   一个局域网的网络协议，使用UDP协议工作，用途：给内部网络或网络服务供应商自动分配IP地址，给用户或者内部网络管理员作为对所有计算机作中央管理的手段。
## 三次握手：

第一次握手：客户端发送syn包(syn=x)到服务器，并进入SYN_SEND状态，等待服务器确认；

第二次握手：服务器收到syn包，必须确认客户的SYN（ack=x+1），同时自己也发送一个SYN包（syn=y），即SYN+ACK包，此时服务器进入SYN_RECV状态；

第三次握手：客户端收到服务器的SYN＋ACK包，向服务器发送确认包ACK(ack=y+1)，此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手。

握手过程中传送的包里不包含数据，三次握手完毕后，客户端与服务器才正式开始传送数据。理想状态下，TCP连接一旦建立，在通信双方中的任何一方主动关闭连接之前，TCP 连接都将被一直保持下去。
## 四次挥手:

与建立连接的“三次握手”类似，断开一个TCP连接则需要“四次挥手”。

第一次挥手：主动关闭方发送一个FIN，用来关闭主动方到被动关闭方的数据传送，也就是主动关闭方告诉被动关闭方：我已经不  会再给你发数据了(当然，在fin包之前发送出去的数据，如果没有收到对应的ack确认报文，主动关闭方依然会重发这些数据)，但是，此时主动关闭方还可  以接受数据。

第二次挥手：被动关闭方收到FIN包后，发送一个ACK给对方，确认序号为收到序号+1（与SYN相同，一个FIN占用一个序号）。
第三次挥手：被动关闭方发送一个FIN，用来关闭被动关闭方到主动关闭方的数据传送，也就是告诉主动关闭方，我的数据也发送完了，不会再给你发数据了。
第四次挥手：主动关闭方收到FIN后，发送一个ACK给被动关闭方，确认序号为收到序号+1，至此，完成四次挥手。
## 在浏览器中输入www.baidu.com后执行的全部过程

1、客户端浏览器通过DNS解析到www.baidu.com的IP地址220.181.27.48，通过这个IP地址找到客户端到服务器的路径。客户端浏览器发起一个HTTP会话到220.161.27.48，然后通过TCP进行封装数据包，输入到网络层。

2、在客户端的传输层，把HTTP会话请求分成报文段，添加源和目的端口，如服务器使用80端口监听客户端的请求，客户端由系统随机选择一个端口如5000，与服务器进行交换，服务器把相应的请求返回给客户端的5000端口。然后使用IP层的IP地址查找目的端。

3、客户端的网络层不用关系应用层或者传输层的东西，主要做的是通过查找路由表确定如何到达服务器，期间可能经过多个路由器，这些都是由路由器来完成的工作，我不作过多的描述，无非就是通过查找路由表决定通过那个路径到达服务器。

4、客户端的链路层，包通过链路层发送到路由器，通过邻居协议查找给定IP地址的MAC地址，然后发送ARP请求查找目的地址，如果得到回应后就可以使用ARP的请求应答交换的IP数据包现在就可以传输了，然后发送IP数据包到达服务器的地址。
## ARP的工作原理
1、首先，每个主机都会在自己的ARP缓冲区中建立一个ARP列表，以表示IP地址和MAC地址之间的对应关系。
2、当源主机要发送数据时，首先检查ARP列表中是否有对应IP地址的目的主机的MAC地址，如果有，则直接发送数据，如果没有，就向“本网段”的所有主机发送ARP数据包，该数据包包括的内容有：源主机IP地址，源主机MAC地址，目的主机的IP地址。  
3、当本网络的所有主机收到该ARP数据包时，首先检查数据包中的目的主机IP 地址是否是自己的IP地址，如果不是，则忽略该数据包，如果是，则首先从数据包中取出源主机的IP和MAC地址写入到ARP列表中，如果已经存在，则覆盖，然后将自己的MAC地址写入ARP响应包中，告诉源主机自己是它想要找的MAC地址。 
4、源主机收到ARP响应包后，将目的主机的IP和MAC地址写入ARP列表，并利用此信息发送数据。如果源主机一直没有收到ARP响应数据包，表示ARP 查询失败。
* 广播发送ARP请求，单播发送ARP响应。

## ICMP(Internet Control Message Protocol)网际控制报文协议
ICMP 报文有两种：差错报告报文和询问报文。
## 当运行PING 127.0.0.1时，这个IP数据报将发送给谁
127.0.0.1是环回地址。主机将测试用的IP数据报发送给本主机的ICMP（而不是发送到因特网上）以便进行环回测试。
## RIP协议的特点？RIP的优缺点？RIP用什么来传送？
1、特点
* 仅和相邻路由器交换信息
* 路由器交换的信息是当前本路由器所知道的全部信息，即自己的路由表
* 按固定的时间间隔交换路由信息
2、优缺点
* 优点：实现简单、开销较小
* 缺点：限制了网络的规模(因为它能使用的最大距离为15)，坏消息传播得慢。  
3、RIP用UDP来传送
## OSPF协议的特点？OSPF用什么来传送？
1、特点
* 向本自治系统中所有路由器发送信息(而RIP是发送给邻居)
* 发送的信息就是与本路由器相邻的所有路由器的链路状态(RIP发送的是整个路由表)
* 只有当链路状态发生变化时，路由器才向所有路由器用洪泛法发送此信息(而RIP是30秒更新一次)  
2、OSPF直接用IP数据报传送
## 交换机和路由器各自的实现原理是什么？有什么区别？
实现原理：  
路由器通过路由决定数据的转发。转发策略称为路由选择。   
而交换机则是一种基于MAC地址识别，能完成封转转发数据包功能的网络设备。交换机可以“学习”MAC地址，并把其存放在内部地址表中，通过在数据帧的起始者和目标接  收者之间建立临时的交换路径，使数据帧直接由源地址到达目的地址。  
区别：  
* 二者的工作层次不同  
交换机工作在数据链路层，而路由器工作在网络层。  
* 二者转发所依据的对象不同  
交换机是利用MAC地址确定转发数据的目的地址，而路由器则是利用IP地址来确定数据转发的地址。  
